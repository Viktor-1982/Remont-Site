# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å CRON_SECRET –≤ Vercel

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Vercel Dashboard** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Settings** ‚Üí **Environment Variables**
2. –ù–∞–∂–º–∏—Ç–µ **Create new**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Key:** `CRON_SECRET`
   - **Value:** `5a211b9aecf3623750ce59edee9f8b19d58d5756018663ef53985316a48c4f0a` (–∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–≤–æ–π)
   - **Environments:** –≤—ã–±–µ—Ä–∏—Ç–µ **All Environments** (Production, Preview, Development)
   - **Note (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** "Secret key for cron jobs - notify subscribers"
4. –ù–∞–∂–º–∏—Ç–µ **Save**

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å vercel.json

–§–∞–π–ª `vercel.json` —É–∂–µ —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:

```json
{
  "crons": [
    {
      "path": "/api/notify-subscribers",
      "schedule": "0 */6 * * *"
    }
  ]
}
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ cron job –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è **–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤**.

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:
- `0 9 * * *` - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00
- `0 */12 * * *` - –∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤
- `0 */4 * * *` - –∫–∞–∂–¥—ã–µ 4 —á–∞—Å–∞

## –®–∞–≥ 3: –°–¥–µ–ª–∞—Ç—å –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `CRON_SECRET` –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π:

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (–µ—Å–ª–∏ –µ—Å—Ç—å Git)**
```bash
git add .
git commit -m "Add CRON_SECRET for auto notifications"
git push
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Vercel Dashboard**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
- –ù–∞–∂–º–∏—Ç–µ **Redeploy** –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º –¥–µ–ø–ª–æ–µ
- –ò–ª–∏ —Å–¥–µ–ª–∞–π—Ç–µ –ø—É—Å—Ç–æ–π –∫–æ–º–º–∏—Ç –∏ –ø—É—à

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Vercel Dashboard

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Cron Jobs**
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ cron job –∞–∫—Ç–∏–≤–µ–Ω –∏ –≤–∏–¥–µ–Ω –≤ —Å–ø–∏—Å–∫–µ
3. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (–≤ —Ç–µ—á–µ–Ω–∏–µ 6 —á–∞—Å–æ–≤) –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
   - **Deployments** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–ø–ª–æ–π ‚Üí **View Function Logs**
   - –ò—â–∏—Ç–µ –≤—ã–∑–æ–≤—ã `/api/notify-subscribers`

### –†—É—á–Ω–æ–π —Ç–µ—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å endpoint –≤—Ä—É—á–Ω—É—é:

```bash
curl "https://renohacks.com/api/notify-subscribers?secret=YOUR_CRON_SECRET" \
  -H "Authorization: Bearer YOUR_CRON_SECRET"
```

–ò–ª–∏ —á–µ—Ä–µ–∑ POST:

```bash
curl -X POST "https://renohacks.com/api/notify-subscribers" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_CRON_SECRET" \
  -d '{"auto": true}'
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **Vercel Cron** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç `/api/notify-subscribers` –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
2. **Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç** –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer YOUR_CRON_SECRET`
3. **Endpoint –Ω–∞—Ö–æ–¥–∏—Ç** –≤—Å–µ —Å—Ç–∞—Ç—å–∏, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
4. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** –≤ —Ç–∞–±–ª–∏—Ü–µ `sent_notifications`, –Ω–µ –±—ã–ª–∏ –ª–∏ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç** email –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —è–∑—ã–∫–µ
6. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç** –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ `sent_notifications`

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–í Supabase SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
SELECT * FROM sent_notifications 
ORDER BY sent_at DESC 
LIMIT 10;
```

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
- ‚úÖ –ó–∞—â–∏—â–∞—Ç—å –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –≤–∞—à–µ–≥–æ —É—á–∞—Å—Ç–∏—è

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Cron job –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `CRON_SECRET` –¥–æ–±–∞–≤–ª–µ–Ω –≤ Environment Variables
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–¥–µ–ª–∞–Ω –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ cron jobs –≤–∫–ª—é—á–µ–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel (View Function Logs)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `sent_notifications` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Supabase
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `RESEND_API_KEY` –∏ –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `subscriptions`

### –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏:

```sql
DELETE FROM sent_notifications 
WHERE post_slug = 'your-article-slug' 
AND post_locale = 'ru';
```

